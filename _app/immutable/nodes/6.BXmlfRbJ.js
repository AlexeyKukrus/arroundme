import"../chunks/DsnmJJEf.js";import{i as B}from"../chunks/ClUBSYe8.js";import{p as D,o as A,G as h,I as _,a as F,f as c,J as y,s as M,ay as N,az as Q,K as g,O as L,M as f,af as w,u as C,H as z,Q as j,aA as R,aB as U,ah as q}from"../chunks/Bsas3Ui_.js";import{i as I}from"../chunks/BQsonRgg.js";import{e as T,i as V,s as W,c as X}from"../chunks/P9jzJ7jG.js";import{b as Y}from"../chunks/BZMneATI.js";import{p as G}from"../chunks/CnjmE0CJ.js";import{s as P}from"../chunks/D9J1ZqkM.js";import{g as Z}from"../chunks/0j5r99M7.js";import{a as $}from"../chunks/DBXne7Uj.js";var ee=h('<div class="map"></div>');function te(r,i){D(i,!1);let e=G(i,"events",24,()=>[]),n=y();function l(t){return t.split("|").map(Number)}function s(){let t=[];ymaps.ready(()=>{const p=new ymaps.Map(c(n),{center:[55.751244,37.618423],zoom:10,controls:["zoomControl"]});e().map(b=>{t=new ymaps.Placemark(l(b.coordinates),{balloonContent:b.name},{preset:"islands#redIcon"}),p.geoObjects.add(t)}),p.events.add("boundschange",()=>{console.log("Новая область карты:",p.getBounds())})})}A(()=>{const t=document.createElement("script");t.src="https://api-maps.yandex.ru/2.1/?lang=ru_RU",t.type="text/javascript",t.onload=s,document.head.appendChild(t)}),B();var d=ee();Y(d,t=>M(n,t),()=>c(n)),_(r,d),F()}const S=(r,i)=>{if(!r||r.length<=i)return r;const e="...",n=e.length,l=i>n?i-n:1;let s=r.slice(0,l+1);const d=s.lastIndexOf(" ");return d>0?s=s.slice(0,d):s=s.slice(0,l),s+e};var ae=h('<div class="event-date"> </div>'),se=h('<div class="event-location"> </div>'),re=h('<p class="event-description"> </p>'),ne=h('<div class="event-card"><img class="event-image"/> <div class="event-card-content"><h3> </h3> <!> <!> <!></div></div>');function ie(r,i){D(i,!1);let e=G(i,"item",24,()=>({name:"",description:"",address:""})),n=y(""),l=y(""),s=y("");const d=()=>{Z(`/event/${e().id}/view`)};N(()=>w(e()),()=>{M(n,S(e().name,25)||""),M(l,S(e().description,70)||""),M(s,S(e().address,40)||"")}),Q(),B();var t=ne(),p=g(t);P(p,"src","event.jpg");var b=L(p,2),a=g(b),m=g(a,!0);f(a);var x=L(a,2);{var k=o=>{var v=ae(),E=g(v,!0);f(v),z(K=>j(E,K),[()=>(w(e()),C(()=>new Date(e().scheduledFor).toLocaleDateString()))]),_(o,v)};I(x,o=>{w(e()),C(()=>e().scheduledFor)&&o(k)})}var u=L(x,2);{var O=o=>{var v=se(),E=g(v);f(v),z(()=>j(E,`📍 ${c(s)??""}`)),_(o,v)};I(u,o=>{w(e()),C(()=>e().address)&&o(O)})}var H=L(u,2);{var J=o=>{var v=re(),E=g(v,!0);f(v),z(()=>j(E,c(l))),_(o,v)};I(H,o=>{w(e()),C(()=>e().description)&&o(J)})}f(b),f(t),z(()=>{P(p,"alt",(w(e()),C(()=>e().name))),j(m,c(n))}),R("click",t,d),_(r,t),F()}var oe=h('<div><div class="events-wrapper"></div></div>'),ve=h('<div class="empty-message">Событий не найдено</div>'),de=h('<div class="events-list-page"><!> <!></div>');function ce(r,i){D(i,!1);let e=y([]),n=y(!1);const l=()=>{$().then(a=>{M(e,a.events)})};A(()=>{l();{const a=()=>M(n,window.matchMedia("(max-width: 1024px)").matches);return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)}}),B();var s=de(),d=g(s);te(d,{get events(){return c(e)}});var t=L(d,2);{var p=a=>{var m=oe(),x=g(m);T(x,5,()=>c(e),V,(k,u)=>{ie(k,{get item(){return c(u)}})}),f(x),f(m),z(()=>W(m,1,X(c(n)?"events-mobile-list":"events-desktop-list"))),_(a,m)},b=a=>{var m=U(),x=q(m);{var k=u=>{var O=ve();_(u,O)};I(x,u=>{u(k)},!0)}_(a,m)};I(t,a=>{c(e).length?a(p):a(b,!1)})}f(s),_(r,s),F()}function we(r){ce(r,{})}export{we as component};
